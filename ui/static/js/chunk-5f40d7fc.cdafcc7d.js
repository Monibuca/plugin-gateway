(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f40d7fc"],{"06f9":function(t,e,i){},"0cb1":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[i("el-form-item",[i("el-input",{attrs:{placeholder:"搜索名称关键词"},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1)],1),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dataListFilter,border:"",fit:""}},[i("el-table-column",{attrs:{prop:"Path",label:"文件路径"}}),t._v(" "),i("el-table-column",{attrs:{label:"大小",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("unitSpeedFormatFilter")(e.row.Size))+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"时长",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("formatDurationTimeFilter")(e.row.Duration))+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return t.onPlay(e.row)}}},[t._v("播放")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(i){return t.onDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("el-dialog",{attrs:{title:"直播播放","append-to-body":"","show-close":!1,"before-close":t.handleCloseDialog,visible:t.dialogVisible,width:"800px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.dialogVisible?i("div",{staticClass:"stream-play-wrap"},[i("jessibuca-player",{ref:"jessibucaPlayer",attrs:{"full-path":t.tempFlvStream}})],1):t._e(),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.handleCloseDialog}},[t._v("关 闭")])],1)])],1)},a=[],n=i("4ec3"),o=i("9cd3"),l=i("ed08"),r={name:"LocalRecord",data:function(){return{searchKey:"",dataList:[],dialogVisible:!1,tempFlvStream:null}},components:{JessibucaPlayer:o["a"]},computed:{dataListFilter:function(){var t=[],e=this.searchKey.trim();return t=e?this.dataList.filter((function(t){return-1!==t.Path.indexOf(e)})):this.dataList,t}},created:function(){this.init()},methods:{init:function(){this.getList()},getList:function(){var t=this;this.dataList=[],Object(n["i"])().then((function(e){Array.isArray(e)&&(t.dataList=e||[])}))},handleCloseDialog:function(){this.dialogVisible=!1,this.tempFlvStream=null},onDelete:function(t){var e=this;this.$confirm("是否删除Flv文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["d"])(t.Path).then((function(t){"success"===t?(e.$message({type:"success",message:"删除成功!"}),e.getList()):e.$message({type:"error",message:t||"网络异常"})}))})).catch((function(){}))},onPlay:function(t){if(t.Path){var e=Object(l["m"])();this.tempFlvStream=e+t.Path,this.dialogVisible=!0}else this.$message({type:"error",message:"Path is empty"})}}},c=r,u=(i("7a99"),i("2877")),d=Object(u["a"])(c,s,a,!1,null,"8801f7be",null);e["default"]=d.exports},"7a99":function(t,e,i){"use strict";i("06f9")},"9cd3":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"player-wrap"},[i("div",{ref:"container",attrs:{id:"container"}})])},a=[],n=i("ed08"),o={name:"JessicaPlayerV3",jessibuca:null,props:{streamPath:{type:String,default:""},fullPath:{type:String,default:""},hasAudio:{type:Boolean,default:!0},useMse:{type:Boolean,default:!1},useWcs:{type:Boolean,default:!1},isMute:{type:Boolean,default:!1}},data:function(){return{reconnectTime:1}},mounted:function(){this.init()},methods:{init:function(){var t=this,e=new window.Jessibuca({container:this.$refs.container,videoBuffer:.2,loadingText:"疯狂加载中...",useWCS:!1,useMSE:!1,hasAudio:this.hasAudio,debug:!1,timeout:5,showBandwidth:!1});e.on("loadingTimeout",(function(){console.log("timeout:",t.reconnectTime),t.reconnectTime>3?t.$message({type:"error",message:"播放超时"}):(t.replay(),t.reconnectTime+=1)})),e.on("stats",(function(t){})),e.on("error",(function(t){console.error("jessibuca error: ",t)})),this.$options.jessibuca=e,this.play()},play:function(){var t=this,e="";if(this.streamPath){var i=Object(n["k"])();e=i+this.streamPath}else this.fullPath&&(e=this.fullPath);console.log("play url is",e);var s=this.$options.jessibuca;s&&s.play(e).then((function(){t.$emit("doPlayed"),t.hasAudio&&s.cancelMute()})).catch((function(e){t.$message({type:"error",message:"播放失败"})}))},replay:function(){var t=this;this.close().then((function(){t.play()}))},close:function(){return this.$options.jessibuca&&this.$options.jessibuca.close()}},destroyed:function(){this.$options.jessibuca&&this.$options.jessibuca.destroy()}},l=o,r=i("2877"),c=Object(r["a"])(l,s,a,!1,null,"e1ce2d8a",null);e["a"]=c.exports}}]);